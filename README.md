# AWZ: Белпочта

## Краткое описание

Модуль интеграции службы доставки "Белпочта" для Bitrix CMS. Позволяет вывести при оформлении заказа выбор отделений Белпочты на карте.

## Подробное описание

<!-- desc-start -->

**Данный модуль не является официальным модулем сервиса Белпочта и не поддерживается данной компанией!**

Модуль предоставляет интеграцию с сервисом доставки Белпочта, включая:

- **Управление ПВЗ**: Автоматическая загрузка и обновление списка пунктов самовывоза из API Белпочты. Список обновляется автоматически раз в неделю через агент.
- **Расчет стоимости доставки**: Интеграция с API для получения актуальных тарифов доставки в зависимости от веса, региона и пункта выдачи.
- **Конфигурация профилей доставки**: Возможность настройки нескольких профилей доставки с индивидуальными параметрами для каждого.
- **Яндекс Карты**: Интеграция с Яндекс Картами для отображения местоположения ПВЗ на карте с использованием JavaScript API.
- **Права доступа**: Гибкая система управления правами доступа к настройкам модуля и просмотру информации о ПВЗ.

### Основные компоненты

- **Handler**: Основной обработчик службы доставки, наследуется от `Bitrix\Sale\Delivery\Services\Base`
- **Profiles\Pickup**: Профиль доставки "Самовывоз" (Pickup) - основной тип доставки

## Настройки и конфигурация

### Общие настройки

- **Яндекс Карты**: 
  - Ключ JavaScript API для отображения карт
  - Ключ API Геосаджеста для автодополнения адресов

- **Загрузка ПВЗ**:
  - Удалить ПВЗ из базы
  - Обновить ПВЗ в базе (запускает агент загрузки)

### Настройки профиля доставки

Для каждого профиля доставки можно настроить:

- **Код ПВЗ**: Код пункта самовывоза по умолчанию
- **Адрес ПВЗ**: Адрес пункта самовывоза
- **Шаблон адреса ПВЗ**: Шаблон для форматирования адреса с переменными:
  - `#ID#` - идентификатор ПВЗ
  - `#NAME#` - название ПВЗ
  - `#ADDRESS#` - адрес отделения
  - `#INFO#` - информация о времени работы
  - `#PHONE#` - контактный телефон
- **Отображать все ПВЗ**: Опция для отображения всех ПВЗ, если ПВЗ нет в переданном городе

<!-- desc-end -->

<!-- cl-start -->
## История версий

https://github.com/azahalski/awz.belpost/blob/master/CHANGELOG.md

<!-- cl-end -->